meta {
  name: Firebase Profile function
  type: http
  seq: 6
}

get {
  url: {{api_url}}/github/user
  body: none
  auth: none
}

tests {
  test("Status code is 200", function() {
    expect(res.getStatus()).to.equal(200);
  });
  
  test("Response is an array", function() {
    expect(res.getBody()).to.be.an("array");
  });
  
  test("Response has expected social providers", function() {
    const body = res.getBody();
    const expectedProviders = ['linkedin', 'twitter', 'facebook', 'instagram'];
    expectedProviders.forEach(provider => {
      const socialItem = body.find(item => item.provider === provider);
      expect(socialItem).to.exist;
      expect(socialItem).to.have.property('url').that.is.a('string').and.is.not.empty;
      expect(socialItem.url).to.match(/^https:\/\//);
    });
  });
  
}

settings {
  encodeUrl: true
  timeout: 0
}

docs {
  # Firebase Function Notion API Test
  
  This request tests a Firebase function endpoint that retrieves data from Notion.
  
  ## Expected Response
  
  The API should return a JSON object containing various sections of data, including:
  - `tech_stack`: An array of technologies with details such as name, URL, description, and rank.
  - `experience`: An array of professional experiences.
  - `hobbies`: An array of hobbies.
  - `education`: An array of educational qualifications.
  - `stuff`: An array of miscellaneous items.
  
  ## Tests Performed
  
  1. Verify HTTP status code is 200
  2. Verify response is valid JSON
  3. Verify response contains key sections: `tech_stack`, `experience`, `hobbies`, `education`, and `stuff`
  4. Verify `tech_stack` is an array
  5. Verify `tech_stack` contains an entry for "Java" with correct properties
}
