<article class="container" aria-labelledby="profile-heading" id="profile-section">
  @if (isLoading) {
    <div class="profile-skeleton">
      <app-skeleton-loader type="avatar" />
      <app-skeleton-loader type="text" [width]="'150px'" [height]="'2rem'" />
      <app-skeleton-loader type="chip" [count]="4" />
    </div>
  } @else {
    <header class="profile-header">
      <a
        [href]="mainUrl"
        rel="noopener noreferrer"
        aria-label="3dime official website"
        class="logo-link"
        appTooltip="3dime Profile"
        appTooltipPlacement="bottom"
      >
        <img [src]="avatar" alt="Profile avatar" class="logo" />
      </a>
    </header>

    <h1 id="profile-heading">✨ 3dime ✨</h1>
    <nav class="socials" aria-label="Social media links">
      @for (link of socialLinks; track link.provider) {
        <a
          [href]="link.url"
          target="_blank"
          rel="noopener noreferrer"
          [attr.aria-label]="link.provider + ' profile'"
          [appTooltip]="link.provider"
          appTooltipPlacement="bottom"
        >
          <i [class]="getFontAwesomeLinks(link.provider)" aria-hidden="true"></i>
        </a>
      } @empty {
        <p class="empty-state">Social links will be displayed here.</p>
      }
    </nav>

    <!-- Floating Settings Button -->
    <div class="settings-fab" [class.active]="menuOpen">
      <button
        class="settings-button"
        [class.active]="menuOpen"
        (click)="toggleMenu()"
        aria-label="Open settings menu"
        [attr.aria-expanded]="menuOpen"
        aria-haspopup="true"
        appTooltip="Settings"
        appTooltipPlacement="left"
      >
        <i class="fas fa-cog" aria-hidden="true"></i>
      </button>

      <!-- Settings Dropdown menu -->
      @if (menuOpen) {
        <div class="settings-dropdown" role="menu" aria-label="Settings">
          <button
            class="dropdown-item theme-toggle"
            role="menuitem"
            (click)="toggleTheme()"
            [appTooltip]="'Toggle theme'"
            appTooltipPlacement="left"
          >
            <i
              class="fas"
              [class.fa-moon]="currentTheme === 'dark'"
              [class.fa-sun]="currentTheme === 'light'"
              aria-hidden="true"
            ></i>
            <span>{{ themeDisplayName }}</span>
          </button>

          <div class="dropdown-separator" role="separator"></div>

          <button
            class="dropdown-item font-size-toggle"
            role="menuitem"
            (click)="changeFontSize()"
            [appTooltip]="'Adjust font size'"
            appTooltipPlacement="left"
          >
            <i class="fas fa-text-height" aria-hidden="true"></i>
            <span>Font Size: {{ fontSizeDisplayName }}</span>
          </button>
        </div>
      }
    </div>
  }
</article>
